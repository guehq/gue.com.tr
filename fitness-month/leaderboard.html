<!DOCTYPE html>
<html lang="en" class="has-navbar-fixed-top" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Nevcan Uludas">
  <title>GUE Fitness Challenge - Strava Club Visualizer</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S6PM2YS7W8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-S6PM2YS7W8');
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="./styles/bulma.min.css"> <!-- https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="./styles/fitness.css">

	<!-- Scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
</head>

<body class="m-0">
	<nav class="navbar is-fixed-top is-dark">
		<div class="navbar-brand">
			<a class="navbar-item" href="/">
				<img src="./images/Logo-gue-long-black.png" alt="Logo" style="filter: invert();">
			</a>
			<div class="navbar-burger js-burger has-text-white" data-target="navbarExampleTransparentExample">
				<span></span>
				<span></span>
				<span></span>
				<span></span>
			</div>
		</div>
	
		<div id="navbarExampleTransparentExample" class="navbar-menu">
			<div class="navbar-start">
				<a class="navbar-item" href="./index.html"><i class="fa-solid fa-house has-text-light"></i> Home</a>
				<a class="navbar-item" href="./activities.html"><i class="fa-solid fa-person-walking has-text-info"></i> Activities</a>
				<a class="navbar-item" href="./members.html"><i class="fa-regular fa-id-card has-text-success"></i> Members</a>
				<a class="navbar-item" href="./communities.html"><i class="fa-solid fa-people-group has-text-light"></i> Communities</a>
				<a class="navbar-item has-background-black" href="./leaderboard.html"><i class="fa-solid fa-trophy has-text-warning"></i> Leaderboards</a>
				<a class="navbar-item" href="./stats.html"><i class="fa-solid fa-chart-simple has-text-link"></i> Stats</a>
				<a class="navbar-item" href="./strava-api-activities.html" disabled><i class="fab fa-strava" style="color: #fc4c02;"></i> Recent Activities</a>
			</div>
	
			<div class="navbar-end">
				<div class="navbar-item">
					<div class="field is-grouped">
						<p class="control">
							<a
								class="bd-tw-button button is-small"
								data-social-network="Strava"
								data-social-action="strava"
								data-social-target="https://www.strava.com/clubs/960343"
								href="https://www.strava.com/clubs/960343"
								target="_blank"
								style="background-color: orangered; color: white;"
							>
								<span class="icon">
									<i class="fab fa-strava"></i>
								</span>
								<span> Strava </span>
							</a>
						</p>
						<p class="control">
							<a 
								class="button is-white is-small" 
								href="https://tables.zapier.com/app/tables/t/01JQVYM71VXTRV4BCB6DNWWRD5" 
								target="_blank"
							>
								<span class="icon">
									<i class="fa-solid fa-window-minimize" style="color: orangered;"></i>
								</span>
								<span>Zapier</span>
							</a>
						</p>
						<p class="control">
							<a 
								class="bd-tw-button button is-small" 
								href="https://docs.google.com/spreadsheets/d/1p-BwWmb7v8kZppGjFQf7_U1s9DfW1hEe3rf4gNZkwoQ" 
								target="_blank"
								style="background-color: green; color: white;"
							>
								<span class="icon">
									<i class="fa-solid fa-table"></i>
								</span>
								<span>gSheet</span>
							</a>
						</p>
					</div>
				</div>
			</div>
		</div>
	</nav>

	<section class="hero is-warning">
		<div class="hero-body">
			<img src="./images/GUE_community.png" alt="GUE Community Logo" style="float: left; width: 90px; margin-right: 2em;">
			<p class="title">Leaderboards</p>
			<p class="subtitle">
				Strava Club - Global Underwater Explorers (GUE)
				<a
					class="bd-tw-button button is-small"
					data-social-network="Strava"
					data-social-action="strava"
					data-social-target="https://www.strava.com/clubs/960343/leaderboard"
					target="_blank"
					href="https://www.strava.com/clubs/960343/leaderboard"
					style="background-color: orangered; color: white;"
					>
					<span class="icon">
						<i class="fab fa-strava"></i>
					</span>
					<span> Strava </span>
				</a>
			</p>
		</div>
	</section>

	<section class="hero is-light">
		<div class="hero-body py-4 ">
			<div class="field is-grouped is-justify-content-center">
				
				<div class="field">
					<div class="field-label is-small has-text-left ml-1">
						<label class="label">Start Date:</label>
					</div>
					<div class="field-body">
						<div class="field">
							<p class="control">
								<input class="input" type="date" id="startDateInput" />
							</p>
						</div>
					</div>
				</div>

				<div class="field">
					<div class="field-label is-small has-text-left ml-1">
						<label class="label">End Date:</label>
					</div>
					<div class="field-body">
						<div class="field">
							<p class="control">
								<input class="input" type="date" id="endDateInput" />
							</p>
						</div>
					</div>
				</div>

				<div class="field" style="width: 120px;">
					<div class="field-label is-small has-text-left ml-1">
						<label class="label">Min Duration:</label>
					</div>
					<div class="field-body">
						<div class="field">
							<p class="control has-icons-left has-icons-right">
								<input class="input" type="number" id="minDurationInput" min="0" />
								<span class="icon is-small is-left">
									<i class="fas fa-clock"></i>
								</span>
								<span class="icon is-small is-right">min.</span>
							</p>
						</div>
					</div>
				</div>

				<!-- <div class="field" style="width: 120px;">
					<div class="field-label is-small has-text-left ml-1">
						<label class="label">Max Rank:</label>
					</div>
					<div class="field-body">
						<div class="field">
							<p class="control has-icons-left">
								<input class="input" type="number" id="maxRankInput" min="1" />
								<span class="icon is-small is-left">
									<i class="fas fa-user"></i>
								</span>
							</p>
						</div>
					</div>
				</div> -->

				<label class="checkbox mt-5 pt-2">
					<input type="checkbox" id="requireDailyStreakInput" checked />
					Require Daily Streak
				</label>

				<div class="field is-grouped is-justify-content-center mt-4 pt-1">
					<div class="control">
						<button id="resetFiltersBtn" class="button is-light">Reset Filters</button>
					</div>
				</div>

			</div>
		</div>
	</section>

	<section>
		<div class="container is-max-widescreen px-5 mt-5">
			<div class="level">
				<div class="level-left">
					<div class="level-item">
						<p class="">
							<span class="title">Leaderboard Lists</span>
						</p>
					</div>
				</div>
				<div class="level-right">
					<div class="level-item">
						<p>
							Logging Since: <b id="loggingSince">2025-04-03</b>
							<br>
							Last Updated: <b id="lastUpdated">n/a</b>
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>
		
	<hr>

	<div class="container is-max-widescreen">
		<main class="mt-5">
      <div class="columns is-multiline is-tablet">
				<div id="durationLB" class="column is-one-third mb-5 has-background-info"></div>
				<div id="distanceLB" class="column is-one-third mb-5 has-background-success"></div>
				<div id="elevationLB" class="column is-one-third mb-5 has-background-warning"></div>
				<div id="activitiesLB" class="column is-one-third mb-5 has-background-danger"></div>
				<div id="metScoreLB" class="column is-one-third mb-5 has-background-dark"></div>

				<div id="communitiesLB" class="column is-two-thirds mb-5"></div>
				<div class="column is-one-third pt-6 mb-6">
					<div class="notification is-info is-light mt-4">
						<p><strong>Community Leaderboard</strong> is sorted by <strong>total MET score</strong> and includes only active members who have at least one valid activity within the selected date range.</p>
					</div>
				</div>


				<!-- QUALIFIED ATHLETES -->
				<div class="column is-full mb-6">
					<h2 class="title is-4">üèÖ 
						<abbr title="All qualified athletes sort by athlete name">Qualified Athletes</abbr>
					</h2>
					<div class="container"> <!-- .table-container -->
						<table id="qualifiedAthletesTable" class="table is-striped is-hoverable is-fullwidth is-narrow">
							<thead>
								<tr>
									<th></th>
									<th class="has-text-left" onclick="sortTableByColumn('qualifiedAthletesTable', 0)">Athlete</th>
									<th class="has-text-right" onclick="sortTableByColumn('qualifiedAthletesTable', 1)">Activities</th>
									<th class="has-text-right" onclick="sortTableByColumn('qualifiedAthletesTable', 2)">Duration</th>
									<th class="has-text-right" onclick="sortTableByColumn('qualifiedAthletesTable', 3)">Distance</th>
									<th class="has-text-right" onclick="sortTableByColumn('qualifiedAthletesTable', 4)">Elevation</th>
									<th class="has-text-right" onclick="sortTableByColumn('qualifiedAthletesTable', 5)">MET</th>
								</tr>
							</thead>
							<tbody id="qualifiedAthletesTableBody">
								<!-- Rows will be dynamically added here -->
							</tbody>
						</table>
					</div>
				</div>


				<!-- NON-QUALIFIED ATHLETES -->
				<div class="column is-full mb-6">
					<h2 class="title is-4">üôÖüèª‚Äç‚ôÇÔ∏è 
						<abbr title="All non-qualified athletes sort by activity count">Non-Qualified Athletes</abbr>
					</h2>
					<div class="container"> <!-- .table-container -->
						<table id="nonQualifiedAthletesTable" class="table is-striped is-hoverable is-fullwidth is-narrow">
							<thead>
								<tr>
									<th></th>
									<th class="has-text-left" onclick="sortTableByColumn('nonQualifiedAthletesTable', 0)">Athlete</th>
									<th class="has-text-right" onclick="sortTableByColumn('nonQualifiedAthletesTable', 1)">Activities</th>
									<th class="has-text-right" onclick="sortTableByColumn('nonQualifiedAthletesTable', 2)">Duration</th>
									<th class="has-text-right" onclick="sortTableByColumn('nonQualifiedAthletesTable', 3)">Distance</th>
									<th class="has-text-right" onclick="sortTableByColumn('nonQualifiedAthletesTable', 4)">Elevation</th>
									<th class="has-text-right" onclick="sortTableByColumn('nonQualifiedAthletesTable', 5)">MET</th>
								</tr>
							</thead>
							<tbody id="nonQualifiedAthletesTableBody">
								<!-- Rows will be dynamically added here -->
							</tbody>
						</table>
					</div>
				</div>

			</div>
		</main>
	</div>

	<footer class="footer has-background-dark has-text-white-ter">
		<div class="content has-text-centered">
			<p>
				<strong class="has-text-white-ter">GUE Fitness Dashboard</strong> &mdash; Brought to you by the 
				<a href="https://www.gue.com" target="_blank" class="has-text-info">Global Underwater Explorers</a> community.
			</p>
			<p>
				Designed and developed by <a href="https://nevcan.com" target="_blank" class="has-text-info">Nevcan Uluda≈ü</a>.
			</p>
			<p>
				<a href="https://www.gue.com/events#accordion-18" target="_blank" class="icon has-text-info">
					<i class="fa-solid fa-globe fa-lg"></i>
				</a>
				<a href="https://www.facebook.com/groups/guefitness/" target="_blank" class="icon has-text-dark-primary">
					<i class="fab fa-facebook fa-lg"></i>
				</a>
				<a href="https://www.strava.com/clubs/960343" target="_blank" class="icon has-text-warning">
					<i class="fab fa-strava fa-lg"></i>
				</a>
				<a href="https://tables.zapier.com/app/tables/t/01JQVYM71VXTRV4BCB6DNWWRD5" target="_blank" class="icon has-text-danger">
					<i class="fa-solid fa-database fa-lg"></i>
				</a>
				<a href="https://docs.google.com/spreadsheets/d/1p-BwWmb7v8kZppGjFQf7_U1s9DfW1hEe3rf4gNZkwoQ" target="_blank" class="icon has-text-success">
					<i class="fa-solid fa-table fa-lg"></i>
				</a>
			</p>
		</div>
	</footer>
  
	<!-- SCRIPTS -->
	<script src="./src/main.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
	<script src="./src/config.js"></script>
	<script src="./src/data-community.js"></script>
	<script src="./src/data-athlete.js"></script>
	<script type="module" src="./src/main-leaderboard.js"></script>
	<script src="./src/download-leaderboard.js"></script>

</body>
</html>
